{
	"name": "Main Gameplay",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "Loading Events"
		},
		{
			"eventType": "comment",
			"text": "Update GameController instance variables to track passage of time and resource production."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-tick",
					"objectClass": "System",
					"sid": 690458617469694
				}
			],
			"actions": [
				{
					"id": "add-to-instvar",
					"objectClass": "GameController",
					"sid": 155177869723363,
					"parameters": {
						"instance-variable": "yearsElapsed",
						"value": "dt * YEARS_PER_MINUTE / 60"
					}
				},
				{
					"type": "script",
					"script": "// Stellium production\nconst gc = runtime.objects.GameController.getFirstInstance();\ngc.instVars.stelliumStockpile += GameUtils.getStelliumRate(runtime) * runtime.dt * runtime.globalVars.YEARS_PER_MINUTE / 60;"
				}
			],
			"sid": 672727096901604
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Facilities",
			"description": "Events and functions for building facilities.",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "BuildFacility",
					"functionDescription": "Function to build a facility on a picked planet. (Checks that facility build is allowed.)",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "facilityName",
							"type": "string",
							"initialValue": "Warp Depot",
							"comment": "Name of the facility to be built.",
							"sid": 309419992959037
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "script",
							"script": "const planetUid = runtime.objects.Planet.getFirstPickedInstance().uid;\nconst buildPreventedMessage = GameUtils.isFacilityBuildPrevented(runtime, planetUid, localVars.facilityName);\nif (buildPreventedMessage) {\n\truntime.callFunction(\"LogDebugMessage\", buildPreventedMessage);\n\treturn;\n}\nGameUtils.buildFacilityOnPlanet(runtime, planetUid, localVars.facilityName);\nruntime.callFunction(\"LogDebugMessage\", `Built ${localVars.facilityName} on planet ${planetUid}.`);"
						}
					],
					"sid": 426283044993029
				}
			],
			"sid": 977042111283029
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Input",
			"description": "Call functions and events based on player inputs.",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "DeselectPlanet",
					"functionDescription": "Deselect a planet by updating GameController and UI.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "GameController",
							"sid": 515808984493551,
							"parameters": {
								"instance-variable": "overviewMode",
								"value": "false"
							}
						},
						{
							"callFunction": "ZoomToDefault",
							"sid": 712166667618860
						},
						{
							"id": "set-instvar-value",
							"objectClass": "GameController",
							"sid": 941529413125172,
							"parameters": {
								"instance-variable": "selectedPlanetUid",
								"value": "0"
							}
						}
					],
					"sid": 318510524515513,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "UiBox",
									"sid": 355490638195188,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Planet\""
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "UiBox",
									"sid": 765177935443302,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"selection\"",
										"property": "offsetY",
										"end-value": "-440",
										"time": "0.5",
										"ease": "easeoutcubic",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 674883601079856
						}
					]
				},
				{
					"functionName": "SelectPlanet",
					"functionDescription": "Select a planet by updating GameController and adjusting UI.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "ZoomToPlanet",
							"sid": 718435124576634
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "GameController",
							"sid": 338042468801104,
							"parameters": {
								"instance-variable": "overviewMode",
								"value": "false"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "GameController",
							"sid": 199946262970277,
							"parameters": {
								"instance-variable": "selectedPlanetUid",
								"value": "Planet.UID"
							}
						}
					],
					"sid": 324109786727323,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "UiBox",
									"sid": 260567814352713,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Planet\""
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "UiBox",
									"sid": 140381930164772,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"selection\"",
										"property": "offsetY",
										"end-value": "21",
										"time": "0.5",
										"ease": "easeoutcubic",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 262114590837373
						}
					]
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Touch Inputs",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-double-tap",
									"objectClass": "Touch",
									"sid": 905869986514254
								}
							],
							"actions": [
								{
									"callFunction": "MoveCameraTo",
									"sid": 516348504259604,
									"parameters": [
										"Touch.X",
										"Touch.Y"
									]
								}
							],
							"sid": 756196497580131
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tap-object",
									"objectClass": "Touch",
									"sid": 571984375416282,
									"parameters": {
										"object": "Planet"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Planet",
									"sid": 803622819296927,
									"parameters": {
										"instance-variable": "explorationLevel",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "SelectPlanet",
									"sid": 146019280638389
								}
							],
							"sid": 231956611975039
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tap-object",
									"objectClass": "Touch",
									"sid": 426386981314104,
									"parameters": {
										"object": "ZoomButton"
									}
								}
							],
							"actions": [],
							"sid": 546338811798456,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 390766790733413,
											"parameters": {
												"value": "GameController.selectedPlanetUid >= 0"
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "GameController",
											"sid": 541464854579559,
											"parameters": {
												"instance-variable": "overviewMode"
											}
										}
									],
									"actions": [
										{
											"callFunction": "DeselectPlanet",
											"sid": 542606468703216
										}
									],
									"sid": 292615600481773,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 713475594785463
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "GameController",
											"sid": 648591901977482,
											"parameters": {
												"instance-variable": "overviewMode",
												"value": "true"
											}
										},
										{
											"callFunction": "ZoomToOverview",
											"sid": 701590988780996
										}
									],
									"sid": 608642748049865
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "GameController",
											"sid": 969978896243214,
											"parameters": {
												"instance-variable": "selectedPlanetUid",
												"value": "-1"
											}
										}
									],
									"sid": 833389707913302
								}
							]
						}
					],
					"sid": 833852739168471
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Keyboard Inputs",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 846064980995569,
									"parameters": {
										"key": 87
									}
								}
							],
							"actions": [],
							"sid": 208754666273903,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Planet",
											"sid": 557257217533057,
											"parameters": {
												"unique-id": "GameController.selectedPlanetUid"
											}
										}
									],
									"actions": [
										{
											"callFunction": "BuildFacility",
											"sid": 829410079667338,
											"parameters": [
												"\"Warp Depot\""
											]
										}
									],
									"sid": 678272148482319
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 180472017081600,
									"parameters": {
										"key": 72
									}
								}
							],
							"actions": [],
							"sid": 720876018016913,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Planet",
											"sid": 647372351363820,
											"parameters": {
												"unique-id": "GameController.selectedPlanetUid"
											}
										}
									],
									"actions": [
										{
											"callFunction": "BuildFacility",
											"sid": 810044831639482,
											"parameters": [
												"\"Habitat\""
											]
										}
									],
									"sid": 644155962741927
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 904643891381544,
									"parameters": {
										"key": 83
									}
								}
							],
							"actions": [],
							"sid": 463076631076733,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Planet",
											"sid": 396416900417081,
											"parameters": {
												"unique-id": "GameController.selectedPlanetUid"
											}
										}
									],
									"actions": [
										{
											"callFunction": "BuildFacility",
											"sid": 639418171818520,
											"parameters": [
												"\"Stellium Extractor\""
											]
										}
									],
									"sid": 947472019439548
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 714635138404473,
									"parameters": {
										"key": 81
									}
								}
							],
							"actions": [],
							"sid": 526417796482591,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Planet",
											"sid": 560558978110878,
											"parameters": {
												"unique-id": "GameController.selectedPlanetUid"
											}
										}
									],
									"actions": [
										{
											"callFunction": "BuildFacility",
											"sid": 555799693328031,
											"parameters": [
												"\"Quantia Harvester\""
											]
										}
									],
									"sid": 145171455460306
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 664561692631312,
									"parameters": {
										"key": 82
									}
								}
							],
							"actions": [],
							"sid": 861192000997993,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Planet",
											"sid": 628714454210921,
											"parameters": {
												"unique-id": "GameController.selectedPlanetUid"
											}
										}
									],
									"actions": [
										{
											"callFunction": "BuildFacility",
											"sid": 208948312330286,
											"parameters": [
												"\"Research Facility\""
											]
										}
									],
									"sid": 636349520851990
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 981810662496834,
									"parameters": {
										"key": 77
									}
								}
							],
							"actions": [],
							"sid": 520810299952405,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Planet",
											"sid": 209336650818173,
											"parameters": {
												"unique-id": "GameController.selectedPlanetUid"
											}
										}
									],
									"actions": [
										{
											"callFunction": "BuildFacility",
											"sid": 180804553793778,
											"parameters": [
												"\"Strip Mine\""
											]
										}
									],
									"sid": 393693474710257
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 257428061795862,
									"parameters": {
										"key": 69
									}
								}
							],
							"actions": [
								{
									"callFunction": "SendResearchStation",
									"sid": 887018841294306,
									"parameters": [
										"Mouse.X",
										"Mouse.Y"
									]
								}
							],
							"sid": 276802658646937
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 181692237755819,
									"parameters": {
										"key": 27
									}
								}
							],
							"actions": [
								{
									"callFunction": "DeselectPlanet",
									"sid": 296184456806952
								}
							],
							"sid": 488503577696685
						}
					],
					"sid": 269664480010904
				}
			],
			"sid": 367876103598794
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Camera",
			"description": "Camera movement and zoom.",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "MoveCameraTo",
					"functionDescription": "Move the camera to the parameter X/Y location.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "x location to which the camera should move.",
							"sid": 382759682275374
						},
						{
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "Y location to which the camera should move.",
							"sid": 122873940754597
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "tween-two-properties",
							"objectClass": "Camera",
							"sid": 663582839002286,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"\"",
								"property": "position",
								"end-x": "x",
								"end-y": "y",
								"time": "ZOOM_TIME",
								"ease": "easeoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 698214500569606
				},
				{
					"functionName": "ZoomToDefault",
					"functionDescription": "Set default zoom level for sector view.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "tween-value",
							"objectClass": "Camera",
							"sid": 305042661574128,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\"",
								"start-value": "Camera.zoomLevel",
								"end-value": "1",
								"time": "ZOOM_TIME",
								"ease": "easeoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 400780952394963
				},
				{
					"functionName": "ZoomToOverview",
					"functionDescription": "Zoom camera out to show entire sector.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "tween-value",
							"objectClass": "Camera",
							"sid": 872055254110003,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\"",
								"start-value": "Camera.zoomLevel",
								"end-value": ".15",
								"time": "ZOOM_TIME",
								"ease": "easeoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 154235620584501
				},
				{
					"functionName": "ZoomToPlanet",
					"functionDescription": "Zoom camera to picked planet.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "tween-two-properties",
							"objectClass": "Camera",
							"sid": 140213006850231,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"\"",
								"property": "position",
								"end-x": "Planet.X",
								"end-y": "Planet.Y",
								"time": "ZOOM_TIME",
								"ease": "easeoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-value",
							"objectClass": "Camera",
							"sid": 154331806423629,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\"",
								"start-value": "Camera.zoomLevel",
								"end-value": "4",
								"time": "ZOOM_TIME",
								"ease": "easeoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 856089588785346
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 541847651363239
						}
					],
					"actions": [
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 252054657630680,
							"parameters": {
								"scale": "Camera.zoomLevel"
							}
						}
					],
					"sid": 301519640374316
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "Camera",
							"sid": 642202338364842,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\""
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Camera",
							"sid": 272695869586273,
							"parameters": {
								"instance-variable": "zoomLevel",
								"value": "Camera.Tween.Value(\"zoom\")"
							}
						}
					],
					"sid": 738815488945617
				}
			],
			"sid": 264496831334389
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "UI",
			"description": "Updates for UI display objects.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Update overview/sector displays."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 471066900308712
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "GameUtils.updateUiText(runtime);"
						}
					],
					"sid": 201205195501745
				},
				{
					"eventType": "comment",
					"text": "Update planet information displays."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "GameController",
							"sid": 155345454217103,
							"parameters": {
								"instance-variable": "selectedPlanetUid",
								"comparison": 5,
								"value": "0"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "Planet",
							"sid": 110556264015963,
							"parameters": {
								"unique-id": "GameController.selectedPlanetUid"
							}
						}
					],
					"actions": [],
					"sid": 940257874056155,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GenericLabel",
									"sid": 947094087621590,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Planet Name\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "GenericLabel",
									"sid": 312241828152022,
									"parameters": {
										"text": "\"Planet Name: \" & Planet.name"
									}
								}
							],
							"sid": 635542973051341
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GenericLabel",
									"sid": 642489719367107,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Improvement Level\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "GenericLabel",
									"sid": 251735783089270,
									"parameters": {
										"text": "\"Improvement Level: \" & Planet.improvementLevel"
									}
								}
							],
							"sid": 826926408751804
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GenericLabel",
									"sid": 383883539103902,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Stellium\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "GenericLabel",
									"sid": 435470082563493,
									"parameters": {
										"text": "\"Stellium Extraction Rate: \" & Planet.stelliumRate - Planet.stelliumDrain"
									}
								}
							],
							"sid": 867161572571403
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GenericLabel",
									"sid": 549989403012881,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Quantia\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "GenericLabel",
									"sid": 500051528316355,
									"parameters": {
										"text": "\"Quantia Harvest Rate: \" & Planet.quantiaRate - Planet.quantiaDrain"
									}
								}
							],
							"sid": 346936358016595
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GenericLabel",
									"sid": 372760780509968,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Exploration\""
									}
								}
							],
							"actions": [],
							"sid": 780148464265243,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Planet",
											"sid": 619788203982004,
											"parameters": {
												"instance-variable": "explorationLevel",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "GenericLabel",
											"sid": 580843522455674,
											"parameters": {
												"text": "\"Exploration Level: Scanned\""
											}
										}
									],
									"sid": 642516988919372
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 713115020338882
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "GenericLabel",
											"sid": 555994358914908,
											"parameters": {
												"text": "\"Exploration Level: Fully Explored\""
											}
										}
									],
									"sid": 938246536931995
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GenericLabel",
									"sid": 975375381851519,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Trait\""
									}
								}
							],
							"actions": [],
							"sid": 261824671977339,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Planet",
											"sid": 426508625059117,
											"parameters": {
												"instance-variable": "explorationLevel",
												"comparison": 2,
												"value": "2"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "GenericLabel",
											"sid": 485371730123089,
											"parameters": {
												"text": "\"(explore planet to discover potential trait)\""
											}
										}
									],
									"sid": 357325264568826
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 426725590508749
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Planet",
											"sid": 276360787893566,
											"parameters": {
												"instance-variable": "explorationLevel",
												"comparison": 0,
												"value": "2"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Planet",
											"sid": 601066102667387,
											"parameters": {
												"instance-variable": "trait",
												"comparison": 4,
												"value": "\"\""
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "GenericLabel",
											"sid": 721821218344006,
											"parameters": {
												"text": "\"(Planet trait: \" & Planet.trait & \")\""
											}
										}
									],
									"sid": 994556720593661
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 257593439024752
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "GenericLabel",
											"sid": 216214108734453,
											"parameters": {
												"text": "\"(No special planet trait)\""
											}
										}
									],
									"sid": 594746230455666
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GenericLabel",
									"sid": 399460820188269,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Supply\""
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "const planet = runtime.objects.Planet.getFirstPickedInstance();\nconst label = runtime.objects.GenericLabel.getFirstPickedInstance();\nconst message = GameUtils.isPlanetSupplied(runtime, planet.uid) ? \"Planet in supply network\" : \"Planet NOT in supply network\";\nlabel.text = message;"
								}
							],
							"sid": 467503219745892
						}
					]
				}
			],
			"sid": 474990103053014
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Exploration",
			"description": "Events for moving exploration ships and updating the exploration layer.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Send a Research Station to a new location by setting movement coordinates, cleaning up anything at the former location, and adjusting instance variables."
				},
				{
					"functionName": "SendResearchStation",
					"functionDescription": "Send a research station to the location specified.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 693493420665511
						},
						{
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 193140090512972
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "EndExploringPlanet",
							"sid": 691277204931657
						},
						{
							"id": "move-to-position",
							"objectClass": "ResearchStation",
							"sid": 878210518985851,
							"behaviorType": "MoveTo",
							"parameters": {
								"x": "x",
								"y": "y",
								"mode": "direct"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "ResearchStation",
							"sid": 641845494713102,
							"parameters": {
								"instance-variable": "activeScanUid",
								"value": "0"
							}
						}
					],
					"sid": 467513985603009
				},
				{
					"eventType": "comment",
					"text": "Place a scan area object upon arrival, and update ship's scan UID."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-arrived",
							"objectClass": "ResearchStation",
							"sid": 456645832489353,
							"behaviorType": "MoveTo"
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 507107691744655,
							"parameters": {
								"object-to-create": "ScanArea",
								"layer": "\"Exploration\"",
								"x": "ResearchStation.X",
								"y": "ResearchStation.Y",
								"create-hierarchy": false,
								"template-name": "\"Scan Area Template\""
							}
						}
					],
					"sid": 672929243750408,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 390103387744442,
									"parameters": {
										"object": "ScanArea"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "ResearchStation",
									"sid": 102633235100639,
									"parameters": {
										"instance-variable": "activeScanUid",
										"value": "ScanArea.UID"
									}
								},
								{
									"id": "set-size",
									"objectClass": "ScanArea",
									"sid": 815161916749835,
									"parameters": {
										"width": "SCAN_AREA_DEFAULT_SIZE",
										"height": "SCAN_AREA_DEFAULT_SIZE"
									}
								},
								{
									"id": "fill-ellipse",
									"objectClass": "ScanArea",
									"sid": 147097788300065,
									"parameters": {
										"x": "ScanArea.Width / 2",
										"y": "ScanArea.Height / 2",
										"radius-x": "ScanArea.Width / 2",
										"radius-y": "ScanArea.Height / 2",
										"color": "rgba(100, 100, 100, 100)",
										"edge": "smooth"
									}
								},
								{
									"id": "wait-for-signal",
									"objectClass": "System",
									"sid": 758011105781361,
									"parameters": {
										"tag": "\"scan_area_complete\" & ScanArea.UID"
									}
								},
								{
									"callFunction": "LogDebugMessage",
									"sid": 941390801022562,
									"parameters": [
										"\"Scan complete; beginning planetary exploration\""
									]
								},
								{
									"id": "set-instvar-value",
									"objectClass": "ResearchStation",
									"sid": 118371402746946,
									"parameters": {
										"instance-variable": "activeScanUid",
										"value": "0"
									}
								},
								{
									"callFunction": "BeginExploringPlanet",
									"sid": 378503538978738,
									"parameters": [
										"Functions.PickPlanetUidToExplore(ResearchStation.UID)",
										"ResearchStation.UID"
									]
								}
							],
							"sid": 549678142254958
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Progressively expand scan area when a research station is actively scanning."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 521864977169507,
							"parameters": {
								"object": "ResearchStation"
							}
						}
					],
					"actions": [],
					"sid": 183515546300618,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "object-uid-exists",
									"objectClass": "System",
									"sid": 825656097737955,
									"parameters": {
										"uid": "ResearchStation.activeScanUid"
									}
								}
							],
							"actions": [],
							"sid": 468293551002665,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "ScanArea",
											"sid": 176990195117674,
											"parameters": {
												"unique-id": "ResearchStation.activeScanUid"
											}
										}
									],
									"actions": [],
									"sid": 188147370552269,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 542069561147068,
													"parameters": {
														"value": "ScanArea.Width < SCAN_MAX_SIZE"
													}
												}
											],
											"actions": [
												{
													"id": "set-size",
													"objectClass": "ScanArea",
													"sid": 483887736477941,
													"parameters": {
														"width": "ScanArea.Width + SCAN_SPEED * dt",
														"height": "ScanArea.Height + SCAN_SPEED * dt"
													}
												},
												{
													"id": "fill-ellipse",
													"objectClass": "ScanArea",
													"sid": 431348716943543,
													"parameters": {
														"x": "ScanArea.Width / 2",
														"y": "ScanArea.Height / 2",
														"radius-x": "ScanArea.Width / 2",
														"radius-y": "ScanArea.Height / 2",
														"color": "rgba(100, 100, 100, 100)",
														"edge": "smooth"
													}
												}
											],
											"sid": 297129771850152
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 942882285163511
												}
											],
											"actions": [
												{
													"id": "signal",
													"objectClass": "System",
													"sid": 955742288054706,
													"parameters": {
														"tag": "\"scan_area_complete\" & ScanArea.UID"
													}
												}
											],
											"sid": 569822921487146
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Scan planet (set exploration level to 1) if a scan radius includes an uncharted (exploration level 0) planet."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 741576654585790,
							"parameters": {
								"object": "ScanArea"
							}
						}
					],
					"actions": [],
					"sid": 150457829494978,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 221390890769714,
									"parameters": {
										"object": "Planet"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Planet",
									"sid": 825685738459921,
									"parameters": {
										"instance-variable": "explorationLevel",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 736210361653467,
									"parameters": {
										"value": "distance(Planet.X, Planet.Y, ScanArea.X, ScanArea.Y) < ScanArea.Width / 2"
									}
								}
							],
							"actions": [
								{
									"id": "signal",
									"objectClass": "System",
									"sid": 289519068185058,
									"parameters": {
										"tag": "\"scan\" & Planet.UID"
									}
								}
							],
							"sid": 527030546940020
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Make uncharted planets appear faded out."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 186907236446791,
							"parameters": {
								"object": "Planet"
							}
						}
					],
					"actions": [],
					"sid": 944926497218672,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Planet",
									"sid": 151069795960574,
									"parameters": {
										"instance-variable": "explorationLevel",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "Planet",
									"sid": 830927628936288,
									"parameters": {
										"opacity": "10"
									}
								}
							],
							"sid": 380115782463029
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 793211601404591
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "Planet",
									"sid": 195481317084989,
									"parameters": {
										"opacity": "100"
									}
								}
							],
							"sid": 968607777069272
						}
					]
				},
				{
					"functionName": "ScanPlanet",
					"functionDescription": "Set planet to scanned (set to exploration level 1).",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Planet",
							"sid": 323858254718874,
							"parameters": {
								"instance-variable": "explorationLevel",
								"value": "1"
							}
						},
						{
							"type": "script",
							"script": "GameUtils.updatePlanetConnections(runtime);"
						},
						{
							"callFunction": "LogDebugMessage",
							"sid": 197955882600389,
							"parameters": [
								"\"Scanned planet \" & Planet.name"
							]
						}
					],
					"sid": 113638445789323
				},
				{
					"functionName": "ExplorePlanet",
					"functionDescription": "Set a planet to fully-explored (exploration level 2).",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Planet",
							"sid": 254013383545556,
							"parameters": {
								"instance-variable": "explorationLevel",
								"value": "2"
							}
						},
						{
							"type": "script",
							"script": "const planet = runtime.objects.Planet.getFirstPickedInstance();\nGameUtils.applyPlanetTraitRetroactively(runtime, planet.uid);"
						},
						{
							"callFunction": "LogDebugMessage",
							"sid": 306082888286053,
							"parameters": [
								"\"Explored planet \" & Planet.name"
							]
						}
					],
					"sid": 427903072584693
				},
				{
					"eventType": "comment",
					"text": "Stage planet signals to be scanned/explored."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 300640059688809
						}
					],
					"actions": [
						{
							"id": "wait-for-signal",
							"objectClass": "System",
							"sid": 633282502256888,
							"parameters": {
								"tag": "\"sector_generation_complete\""
							}
						}
					],
					"sid": 953282995217412,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 298823393167436,
									"parameters": {
										"object": "Planet"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Planet",
									"sid": 467523928469364,
									"parameters": {
										"instance-variable": "explorationLevel",
										"comparison": 2,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "wait-for-signal",
									"objectClass": "System",
									"sid": 175061168848814,
									"parameters": {
										"tag": "\"scan\" & Planet.UID"
									}
								},
								{
									"callFunction": "ScanPlanet",
									"sid": 852742338960446
								}
							],
							"sid": 853923949673970
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 132053906891704,
									"parameters": {
										"object": "Planet"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Planet",
									"sid": 256906614113644,
									"parameters": {
										"instance-variable": "explorationLevel",
										"comparison": 2,
										"value": "2"
									}
								}
							],
							"actions": [
								{
									"id": "wait-for-signal",
									"objectClass": "System",
									"sid": 820333741188947,
									"parameters": {
										"tag": "\"explore\" & Planet.UID"
									}
								},
								{
									"callFunction": "ExplorePlanet",
									"sid": 840632538165551
								}
							],
							"sid": 238482599458076
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 210979547494352
						}
					],
					"actions": [],
					"sid": 848936461572186
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 871672280047215
						}
					],
					"actions": [],
					"sid": 401435332479615
				},
				{
					"functionName": "PickPlanetUidToExplore",
					"functionDescription": "Pick the suitable planet to explore and return UID.",
					"functionCategory": "",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "researchStationUid",
							"type": "number",
							"initialValue": "0",
							"comment": "UID of the research station to use for \"nearest\" calculation.",
							"sid": 666628595224071
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "ResearchStation",
							"sid": 545651609089079,
							"parameters": {
								"unique-id": "researchStationUid"
							}
						},
						{
							"id": "pick-by-evaluate",
							"objectClass": "System",
							"sid": 662943221111211,
							"parameters": {
								"object": "Planet",
								"expression": "Planet.explorationLevel = 1"
							}
						},
						{
							"id": "pick-nearestfurthest",
							"objectClass": "Planet",
							"sid": 802794099077149,
							"parameters": {
								"which": "nearest",
								"x": "ResearchStation.X",
								"y": "ResearchStation.Y"
							}
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 299127464573123,
							"parameters": {
								"value": "Planet.UID"
							}
						}
					],
					"sid": 790294211319620
				},
				{
					"functionName": "BeginExploringPlanet",
					"functionDescription": "Set up variables to begin exploring a planet.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "planetUid",
							"type": "number",
							"initialValue": "0",
							"comment": "UID of the planet to begin exploring.",
							"sid": 219267633215971
						},
						{
							"name": "researchStationUid",
							"type": "number",
							"initialValue": "0",
							"comment": "UID of the research station that will be exploring.",
							"sid": 288168253388939
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Planet",
							"sid": 564179895794986,
							"parameters": {
								"unique-id": "planetUid"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "ResearchStation",
							"sid": 955059348945623,
							"parameters": {
								"unique-id": "researchStationUid"
							}
						}
					],
					"actions": [
						{
							"callFunction": "LogDebugMessage",
							"sid": 257068897336926,
							"parameters": [
								"\"Now exploring planet \" & Planet.name"
							]
						},
						{
							"id": "set-instvar-value",
							"objectClass": "ResearchStation",
							"sid": 875014738868010,
							"parameters": {
								"instance-variable": "exploringPlanetUid",
								"value": "planetUid"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "ResearchStation",
							"sid": 875217504660367,
							"parameters": {
								"instance-variable": "explorationYearsRemaining",
								"value": "EXPLORE_TIME_YEARS"
							}
						}
					],
					"sid": 280218353422598
				},
				{
					"functionName": "EndExploringPlanet",
					"functionDescription": "Research station stops exploring a planet (either because it completed, or moved away).",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "LogDebugMessage",
							"sid": 323494771957886,
							"parameters": [
								"\"Ending planetary exploration\""
							]
						},
						{
							"id": "set-instvar-value",
							"objectClass": "ResearchStation",
							"sid": 270871447879871,
							"parameters": {
								"instance-variable": "exploringPlanetUid",
								"value": "0"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "ResearchStation",
							"sid": 410999512429566,
							"parameters": {
								"instance-variable": "explorationYearsRemaining",
								"value": "0"
							}
						}
					],
					"sid": 469535009678474
				},
				{
					"eventType": "comment",
					"text": "Continue exploring target planet, or select new planet to explore if complete."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 803960448490704,
							"parameters": {
								"object": "ResearchStation"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "ResearchStation",
							"sid": 758973986262195,
							"parameters": {
								"instance-variable": "exploringPlanetUid",
								"comparison": 4,
								"value": "0"
							}
						}
					],
					"actions": [],
					"sid": 222191903702820,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "ResearchStation",
									"sid": 781359862102684,
									"parameters": {
										"instance-variable": "explorationYearsRemaining",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "subtract-from-instvar",
									"objectClass": "ResearchStation",
									"sid": 107238873210255,
									"parameters": {
										"instance-variable": "explorationYearsRemaining",
										"value": "dt * YEARS_PER_MINUTE / 60"
									}
								}
							],
							"sid": 649968198345127
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 899352986489401
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "Planet",
									"sid": 873653761418498,
									"parameters": {
										"unique-id": "ResearchStation.exploringPlanetUid"
									}
								}
							],
							"actions": [
								{
									"callFunction": "ExplorePlanet",
									"sid": 653268791739858
								},
								{
									"callFunction": "EndExploringPlanet",
									"sid": 219601070801033
								},
								{
									"callFunction": "BeginExploringPlanet",
									"sid": 765104270134731,
									"parameters": [
										"Functions.PickPlanetUidToExplore(ResearchStation.UID)",
										"ResearchStation.UID"
									]
								}
							],
							"sid": 923282069811781
						}
					]
				}
			],
			"sid": 504751791717747
		}
	],
	"sid": 165260888475578
}