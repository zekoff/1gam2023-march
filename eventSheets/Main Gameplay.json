{
	"name": "Main Gameplay",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "Loading Events"
		},
		{
			"eventType": "comment",
			"text": "Update GameController instance variables to track passage of time and resource production."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-tick",
					"objectClass": "System",
					"sid": 690458617469694
				}
			],
			"actions": [
				{
					"id": "add-to-instvar",
					"objectClass": "GameController",
					"sid": 155177869723363,
					"parameters": {
						"instance-variable": "yearsElapsed",
						"value": "dt * YEARS_PER_MINUTE / 60"
					}
				},
				{
					"type": "script",
					"script": "// Stellium production\nconst gc = runtime.objects.GameController.getFirstInstance();\ngc.instVars.stelliumStockpile += GameUtils.getStelliumRate(runtime) * runtime.dt * runtime.globalVars.YEARS_PER_MINUTE / 60;"
				}
			],
			"sid": 672727096901604
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Facilities",
			"description": "Events and functions for building facilities.",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "BuildFacility",
					"functionDescription": "Function to build a facility on a picked planet. (Checks that facility build is allowed.)",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "facilityName",
							"type": "string",
							"initialValue": "Warp Depot",
							"comment": "Name of the facility to be built.",
							"sid": 309419992959037
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "script",
							"script": "const planetUid = runtime.objects.Planet.getFirstPickedInstance().uid;\nconst buildPreventedMessage = GameUtils.isFacilityBuildPrevented(runtime, planetUid, localVars.facilityName);\nif (buildPreventedMessage) {\n\truntime.callFunction(\"LogDebugMessage\", buildPreventedMessage);\n\treturn;\n}\nGameUtils.buildFacilityOnPlanet(runtime, planetUid, localVars.facilityName);\nruntime.callFunction(\"LogDebugMessage\", `Built ${localVars.facilityName} on planet ${planetUid}.`);"
						}
					],
					"sid": 426283044993029,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 372539049017146,
									"parameters": {
										"value": "facilityName = \"Warp Depot\""
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 605028562881347,
									"parameters": {
										"object-to-create": "SupplyHighlight",
										"layer": "\"Supply Highlights\"",
										"x": "Planet.X",
										"y": "Planet.Y",
										"create-hierarchy": false,
										"template-name": "\"Standard Template\""
									}
								}
							],
							"sid": 690792689413816,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 370403488533357,
											"parameters": {
												"object": "SupplyHighlight"
											}
										}
									],
									"actions": [
										{
											"id": "set-size",
											"objectClass": "SupplyHighlight",
											"sid": 424863833522861,
											"parameters": {
												"width": "WARP_DEPOT_RADIUS * 2",
												"height": "WARP_DEPOT_RADIUS * 2"
											}
										},
										{
											"id": "fill-ellipse",
											"objectClass": "SupplyHighlight",
											"sid": 287417816104951,
											"parameters": {
												"x": "SupplyHighlight.Width / 2",
												"y": "SupplyHighlight.Height / 2",
												"radius-x": "SupplyHighlight.Width / 2",
												"radius-y": "SupplyHighlight.Height / 2",
												"color": "rgba(100, 100, 0, 50)",
												"edge": "smooth"
											}
										}
									],
									"sid": 140495177921207
								}
							],
							"isOrBlock": true
						}
					]
				},
				{
					"functionName": "GetTotalImprovement",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 229376850551028,
					"children": [
						{
							"eventType": "variable",
							"name": "totalImprovement",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 254124255219448
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 421131397208578,
									"parameters": {
										"object": "Planet"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 445893567833757,
									"parameters": {
										"variable": "totalImprovement",
										"value": "Planet.improvementLevel"
									}
								}
							],
							"sid": 881898845633948
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 675969637158149,
									"parameters": {
										"value": "totalImprovement"
									}
								}
							],
							"sid": 804179522570717
						}
					]
				}
			],
			"sid": 977042111283029
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Input",
			"description": "Call functions and events based on player inputs.",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "CycleOverviewMode",
					"functionDescription": "When already in an overview mode, cycle to the next one.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 582783365998797,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GameController",
									"sid": 719145965010365,
									"parameters": {
										"instance-variable": "overviewMode",
										"comparison": 0,
										"value": "OVERVIEW_SECTOR"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "GameController",
									"sid": 209664027595993,
									"parameters": {
										"instance-variable": "overviewMode",
										"value": "OVERVIEW_EXPLORATION"
									}
								},
								{
									"callFunction": "HighlightExploration",
									"sid": 742510459135228
								}
							],
							"sid": 261348175057854
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 795058167325511
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "GameController",
									"sid": 386775291355385,
									"parameters": {
										"instance-variable": "overviewMode",
										"comparison": 0,
										"value": "OVERVIEW_EXPLORATION"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "GameController",
									"sid": 477551696608129,
									"parameters": {
										"instance-variable": "overviewMode",
										"value": "OVERVIEW_SUPPLY"
									}
								},
								{
									"callFunction": "HighlightSupply",
									"sid": 701774474531125
								}
							],
							"sid": 319184540486169
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 747006838066861
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "GameController",
									"sid": 621442741781327,
									"disabled": true,
									"parameters": {
										"instance-variable": "overviewMode",
										"comparison": 0,
										"value": "OVERVIEW_SUPPLY"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "GameController",
									"sid": 379928923060695,
									"parameters": {
										"instance-variable": "overviewMode",
										"value": "OVERVIEW_SECTOR"
									}
								},
								{
									"callFunction": "HighlightSector",
									"sid": 657835721010143
								}
							],
							"sid": 158242506200407
						}
					]
				},
				{
					"functionName": "SetDefaultMode",
					"functionDescription": "Deselect a planet by updating GameController and UI.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "ZoomToDefault",
							"sid": 335052349560221
						},
						{
							"id": "set-instvar-value",
							"objectClass": "GameController",
							"sid": 241266024968672,
							"parameters": {
								"instance-variable": "selectedPlanetUid",
								"value": "0"
							}
						},
						{
							"callFunction": "ShowPartialOverviewPanel",
							"sid": 931141675920458
						},
						{
							"id": "set-instvar-value",
							"objectClass": "GameController",
							"sid": 840884097790143,
							"parameters": {
								"instance-variable": "overviewMode",
								"value": "DEFAULT_VIEW"
							}
						},
						{
							"callFunction": "RemoveHighlights",
							"sid": 142988706655111
						}
					],
					"sid": 821159689685967,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "UiBox",
									"sid": 534491669031132,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Planet\""
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "UiBox",
									"sid": 425849402522524,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"selection\"",
										"property": "offsetY",
										"end-value": "-440",
										"time": "0.5",
										"ease": "easeoutcubic",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 173554995804206
						}
					]
				},
				{
					"functionName": "SelectPlanet",
					"functionDescription": "Select a planet by updating GameController and adjusting UI.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "ZoomToPlanet",
							"sid": 604906259262922
						},
						{
							"id": "set-instvar-value",
							"objectClass": "GameController",
							"sid": 447146864850392,
							"parameters": {
								"instance-variable": "selectedPlanetUid",
								"value": "Planet.UID"
							}
						},
						{
							"callFunction": "HideOverviewPanel",
							"sid": 754145123356258
						}
					],
					"sid": 898136418189103,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "UiBox",
									"sid": 480945249462798,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Planet\""
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "UiBox",
									"sid": 943784041794819,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"selection\"",
										"property": "offsetY",
										"end-value": "21",
										"time": "0.5",
										"ease": "easeoutcubic",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 933041962787836
						}
					]
				},
				{
					"functionName": "SetOverviewMode",
					"functionDescription": "Change UI and GameController state into overview mode.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "ZoomToOverview",
							"sid": 211746243746707
						},
						{
							"callFunction": "ShowFullOverviewPanel",
							"sid": 718069292418581
						},
						{
							"id": "set-instvar-value",
							"objectClass": "GameController",
							"sid": 984518094355410,
							"disabled": true,
							"parameters": {
								"instance-variable": "overviewMode",
								"value": "OVERVIEW_SECTOR"
							}
						},
						{
							"callFunction": "CycleOverviewMode",
							"sid": 248950441979793
						}
					],
					"sid": 651224011027360
				},
				{
					"functionName": "ShowFullOverviewPanel",
					"functionDescription": "Show the full overview panel.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "UiBox",
							"sid": 580482825444588,
							"parameters": {
								"instance-variable": "handle",
								"comparison": 0,
								"value": "\"Overview\""
							}
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "UiBox",
							"sid": 251511836456211,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"\"",
								"property": "offsetY",
								"end-value": "1500",
								"time": "ZOOM_TIME",
								"ease": "easeoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 871552593113814
				},
				{
					"functionName": "ShowPartialOverviewPanel",
					"functionDescription": "Show the topmost part of the overview panel.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "UiBox",
							"sid": 959175626404931,
							"parameters": {
								"instance-variable": "handle",
								"comparison": 0,
								"value": "\"Overview\""
							}
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "UiBox",
							"sid": 555033532738887,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"\"",
								"property": "offsetY",
								"end-value": "1816",
								"time": "ZOOM_TIME",
								"ease": "easeoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 694398635485721
				},
				{
					"functionName": "HideOverviewPanel",
					"functionDescription": "Move the Overview panel completely off the screen.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "UiBox",
							"sid": 505129736036241,
							"parameters": {
								"instance-variable": "handle",
								"comparison": 0,
								"value": "\"Overview\""
							}
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "UiBox",
							"sid": 106718487476805,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"\"",
								"property": "offsetY",
								"end-value": "1950",
								"time": "ZOOM_TIME",
								"ease": "easeoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 467357353646440
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Touch Inputs",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Camera control via double-taps in default view."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-double-tap",
									"objectClass": "Touch",
									"sid": 905869986514254
								},
								{
									"id": "is-touching-object",
									"objectClass": "Touch",
									"sid": 386515667548441,
									"parameters": {
										"object": "UiBox"
									},
									"isInverted": true
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "GameController",
									"sid": 283423117187469,
									"parameters": {
										"instance-variable": "selectedPlanetUid",
										"comparison": 3,
										"value": "0"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "GameController",
									"sid": 169509545815595,
									"parameters": {
										"instance-variable": "overviewMode",
										"comparison": 0,
										"value": "DEFAULT_VIEW"
									}
								}
							],
							"actions": [
								{
									"callFunction": "MoveCameraTo",
									"sid": 516348504259604,
									"parameters": [
										"Touch.X",
										"Touch.Y"
									]
								}
							],
							"sid": 756196497580131
						},
						{
							"eventType": "comment",
							"text": "Select planet on touch."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tap-object",
									"objectClass": "Touch",
									"sid": 571984375416282,
									"parameters": {
										"object": "Planet"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "GameController",
									"sid": 166188398552708,
									"parameters": {
										"instance-variable": "overviewMode",
										"comparison": 0,
										"value": "DEFAULT_VIEW"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Planet",
									"sid": 803622819296927,
									"parameters": {
										"instance-variable": "explorationLevel",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "SelectPlanet",
									"sid": 146019280638389
								}
							],
							"sid": 231956611975039
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tap-object",
									"objectClass": "Touch",
									"sid": 467562287424899,
									"parameters": {
										"object": "ExitButton"
									}
								}
							],
							"actions": [
								{
									"callFunction": "SetDefaultMode",
									"sid": 905802620401518
								}
							],
							"sid": 513330156586949
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tap-object",
									"objectClass": "Touch",
									"sid": 294801563145252,
									"parameters": {
										"object": "OverviewButton"
									}
								}
							],
							"actions": [],
							"sid": 765990198650583,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "GameController",
											"sid": 652380612657779,
											"parameters": {
												"instance-variable": "overviewMode",
												"comparison": 0,
												"value": "DEFAULT_VIEW"
											}
										}
									],
									"actions": [
										{
											"callFunction": "SetOverviewMode",
											"sid": 598117331002627
										}
									],
									"sid": 526495987525902
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 105158596304743
										}
									],
									"actions": [
										{
											"callFunction": "SetDefaultMode",
											"sid": 774029314021066
										}
									],
									"sid": 239579734542569
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tap-object",
									"objectClass": "Touch",
									"sid": 652207993579183,
									"parameters": {
										"object": "CycleButton"
									}
								}
							],
							"actions": [
								{
									"callFunction": "CycleOverviewMode",
									"sid": 500796242220051
								}
							],
							"sid": 239015437137507
						},
						{
							"eventType": "comment",
							"text": "Handle click/touch events in overview mode."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tap",
									"objectClass": "Touch",
									"sid": 964326466882396
								},
								{
									"id": "is-touching-object",
									"objectClass": "Touch",
									"sid": 462051097856793,
									"parameters": {
										"object": "UiBox"
									},
									"isInverted": true
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "GameController",
									"sid": 969246204415214,
									"parameters": {
										"instance-variable": "overviewMode",
										"comparison": 1,
										"value": "DEFAULT_VIEW"
									}
								}
							],
							"actions": [],
							"sid": 341146006289822,
							"children": [
								{
									"eventType": "comment",
									"text": "Control Research Station when in Exploration mode."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "GameController",
											"sid": 896961313319622,
											"parameters": {
												"instance-variable": "overviewMode",
												"comparison": 0,
												"value": "OVERVIEW_EXPLORATION"
											}
										}
									],
									"actions": [
										{
											"callFunction": "SendResearchStation",
											"sid": 120117365867845,
											"parameters": [
												"Touch.X",
												"Touch.Y"
											]
										}
									],
									"sid": 756997762831841
								},
								{
									"eventType": "comment",
									"text": "Send camera to new location."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 439604012055165
										}
									],
									"actions": [
										{
											"callFunction": "SetDefaultMode",
											"sid": 902878641099482
										},
										{
											"callFunction": "MoveCameraTo",
											"sid": 969886265751244,
											"parameters": [
												"Touch.X",
												"Touch.Y"
											]
										}
									],
									"sid": 360123330370473
								}
							]
						}
					],
					"sid": 833852739168471
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Keyboard Inputs",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 846064980995569,
									"parameters": {
										"key": 87
									}
								}
							],
							"actions": [],
							"sid": 208754666273903,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Planet",
											"sid": 557257217533057,
											"parameters": {
												"unique-id": "GameController.selectedPlanetUid"
											}
										}
									],
									"actions": [
										{
											"callFunction": "BuildFacility",
											"sid": 829410079667338,
											"parameters": [
												"\"Warp Depot\""
											]
										}
									],
									"sid": 678272148482319
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 180472017081600,
									"parameters": {
										"key": 72
									}
								}
							],
							"actions": [],
							"sid": 720876018016913,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Planet",
											"sid": 647372351363820,
											"parameters": {
												"unique-id": "GameController.selectedPlanetUid"
											}
										}
									],
									"actions": [
										{
											"callFunction": "BuildFacility",
											"sid": 810044831639482,
											"parameters": [
												"\"Habitat\""
											]
										}
									],
									"sid": 644155962741927
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 904643891381544,
									"parameters": {
										"key": 83
									}
								}
							],
							"actions": [],
							"sid": 463076631076733,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Planet",
											"sid": 396416900417081,
											"parameters": {
												"unique-id": "GameController.selectedPlanetUid"
											}
										}
									],
									"actions": [
										{
											"callFunction": "BuildFacility",
											"sid": 639418171818520,
											"parameters": [
												"\"Stellium Extractor\""
											]
										}
									],
									"sid": 947472019439548
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 714635138404473,
									"parameters": {
										"key": 81
									}
								}
							],
							"actions": [],
							"sid": 526417796482591,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Planet",
											"sid": 560558978110878,
											"parameters": {
												"unique-id": "GameController.selectedPlanetUid"
											}
										}
									],
									"actions": [
										{
											"callFunction": "BuildFacility",
											"sid": 555799693328031,
											"parameters": [
												"\"Quantia Harvester\""
											]
										}
									],
									"sid": 145171455460306
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 664561692631312,
									"parameters": {
										"key": 82
									}
								}
							],
							"actions": [],
							"sid": 861192000997993,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Planet",
											"sid": 628714454210921,
											"parameters": {
												"unique-id": "GameController.selectedPlanetUid"
											}
										}
									],
									"actions": [
										{
											"callFunction": "BuildFacility",
											"sid": 208948312330286,
											"parameters": [
												"\"Research Facility\""
											]
										}
									],
									"sid": 636349520851990
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 981810662496834,
									"parameters": {
										"key": 77
									}
								}
							],
							"actions": [],
							"sid": 520810299952405,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Planet",
											"sid": 209336650818173,
											"parameters": {
												"unique-id": "GameController.selectedPlanetUid"
											}
										}
									],
									"actions": [
										{
											"callFunction": "BuildFacility",
											"sid": 180804553793778,
											"parameters": [
												"\"Strip Mine\""
											]
										}
									],
									"sid": 393693474710257
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 257428061795862,
									"parameters": {
										"key": 69
									}
								}
							],
							"actions": [
								{
									"callFunction": "SendResearchStation",
									"sid": 887018841294306,
									"parameters": [
										"Mouse.X",
										"Mouse.Y"
									]
								}
							],
							"sid": 276802658646937
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 748035714872436,
									"parameters": {
										"key": 67
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "GameController",
									"sid": 584819423930554,
									"parameters": {
										"instance-variable": "selectedPlanetUid",
										"comparison": 4,
										"value": "0"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"callFunction": "CycleOverviewMode",
									"sid": 787893708069790
								}
							],
							"sid": 843203814569873,
							"disabled": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 181692237755819,
									"parameters": {
										"key": 27
									}
								}
							],
							"actions": [],
							"sid": 488503577696685,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "GameController",
											"sid": 514718139705774,
											"parameters": {
												"instance-variable": "selectedPlanetUid",
												"comparison": 4,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"callFunction": "SetDefaultMode",
											"sid": 323497864074391
										}
									],
									"sid": 134992499284255
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 593128161180037
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "GameController",
											"sid": 768206925101672,
											"parameters": {
												"instance-variable": "overviewMode",
												"comparison": 1,
												"value": "\"\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "SetDefaultMode",
											"sid": 183444924220163
										}
									],
									"sid": 210645627951213
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 473209245656836
										}
									],
									"actions": [
										{
											"callFunction": "SetOverviewMode",
											"sid": 944366968090212
										}
									],
									"sid": 753619776028672
								}
							]
						}
					],
					"sid": 269664480010904
				}
			],
			"sid": 367876103598794
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Visualization Layers",
			"description": "Events and functions that modify the visualization layers in overview mode.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 931945177038741
						}
					],
					"actions": [
						{
							"id": "set-layer-opacity",
							"objectClass": "System",
							"sid": 790018054971894,
							"parameters": {
								"layer": "\"Exploration Highlights\"",
								"opacity": "VisualizationController.explorationOpacity"
							}
						},
						{
							"id": "set-layer-opacity",
							"objectClass": "System",
							"sid": 352381988348572,
							"parameters": {
								"layer": "\"Supply Highlights\"",
								"opacity": "VisualizationController.supplyOpacity"
							}
						},
						{
							"id": "set-layer-opacity",
							"objectClass": "System",
							"sid": 804790798669032,
							"parameters": {
								"layer": "\"Sector Highlights\"",
								"opacity": "VisualizationController.sectorOpacity"
							}
						},
						{
							"id": "set-layer-opacity",
							"objectClass": "System",
							"sid": 140031974710925,
							"parameters": {
								"layer": "\"Planet Highlights\"",
								"opacity": "VisualizationController.planetOpacity"
							}
						},
						{
							"id": "set-layer-opacity",
							"objectClass": "System",
							"sid": 815026705250888,
							"parameters": {
								"layer": "\"Ships\"",
								"opacity": "VisualizationController.shipsOpacity"
							}
						},
						{
							"id": "set-layer-opacity",
							"objectClass": "System",
							"sid": 513065082582724,
							"parameters": {
								"layer": "\"Background\"",
								"opacity": "VisualizationController.backgroundOpacity"
							}
						}
					],
					"sid": 969683363951685,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "VisualizationController",
									"sid": 201379424331103,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"planet\""
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "VisualizationController",
									"sid": 953223170914017,
									"parameters": {
										"instance-variable": "planetOpacity",
										"value": "VisualizationController.Tween.Value(\"planet\")"
									}
								}
							],
							"sid": 213263566800489
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "VisualizationController",
									"sid": 962093145241738,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"background\""
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "VisualizationController",
									"sid": 894749815753007,
									"parameters": {
										"instance-variable": "backgroundOpacity",
										"value": "VisualizationController.Tween.Value(\"background\")"
									}
								}
							],
							"sid": 794691632662751
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "VisualizationController",
									"sid": 993744796604972,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"exploration\""
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "VisualizationController",
									"sid": 138790181539140,
									"parameters": {
										"instance-variable": "explorationOpacity",
										"value": "VisualizationController.Tween.Value(\"exploration\")"
									}
								}
							],
							"sid": 728053601080978
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "VisualizationController",
									"sid": 420528948603843,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"supply\""
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "VisualizationController",
									"sid": 191083272099946,
									"parameters": {
										"instance-variable": "supplyOpacity",
										"value": "VisualizationController.Tween.Value(\"supply\")"
									}
								}
							],
							"sid": 315701165436332
						}
					]
				},
				{
					"functionName": "GenericHighlights",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "tween-value",
							"objectClass": "VisualizationController",
							"sid": 962148287555556,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"planet\"",
								"start-value": "VisualizationController.planetOpacity",
								"end-value": "100",
								"time": "ZOOM_TIME",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-value",
							"objectClass": "VisualizationController",
							"sid": 953636231856257,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"background\"",
								"start-value": "VisualizationController.backgroundOpacity",
								"end-value": "20",
								"time": "ZOOM_TIME",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 676357692296198
				},
				{
					"functionName": "HighlightExploration",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "GenericHighlights",
							"sid": 112384089304563
						},
						{
							"id": "tween-value",
							"objectClass": "VisualizationController",
							"sid": 292403598523574,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"exploration\"",
								"start-value": "VisualizationController.explorationOpacity",
								"end-value": "100",
								"time": "ZOOM_TIME",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-value",
							"objectClass": "VisualizationController",
							"sid": 890208433103160,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"supply\"",
								"start-value": "VisualizationController.supplyOpacity",
								"end-value": "0",
								"time": "ZOOM_TIME",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 672471986017895
				},
				{
					"functionName": "HighlightSector",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "GenericHighlights",
							"sid": 403804664104768
						},
						{
							"id": "tween-value",
							"objectClass": "VisualizationController",
							"sid": 627833167033850,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"exploration\"",
								"start-value": "VisualizationController.explorationOpacity",
								"end-value": "0",
								"time": "ZOOM_TIME",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-value",
							"objectClass": "VisualizationController",
							"sid": 486289950565806,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"supply\"",
								"start-value": "VisualizationController.supplyOpacity",
								"end-value": "0",
								"time": "ZOOM_TIME",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 965237121943544
				},
				{
					"functionName": "HighlightSupply",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "GenericHighlights",
							"sid": 284100006791105
						},
						{
							"id": "tween-value",
							"objectClass": "VisualizationController",
							"sid": 544113287110563,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"exploration\"",
								"start-value": "VisualizationController.explorationOpacity",
								"end-value": "0",
								"time": "ZOOM_TIME",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-value",
							"objectClass": "VisualizationController",
							"sid": 716935135198377,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"supply\"",
								"start-value": "VisualizationController.supplyOpacity",
								"end-value": "100",
								"time": "ZOOM_TIME",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 281739808477068
				},
				{
					"functionName": "RemoveHighlights",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "tween-value",
							"objectClass": "VisualizationController",
							"sid": 900446488787005,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"supply\"",
								"start-value": "VisualizationController.supplyOpacity",
								"end-value": "0",
								"time": "ZOOM_TIME",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-value",
							"objectClass": "VisualizationController",
							"sid": 972951692854958,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"planet\"",
								"start-value": "VisualizationController.planetOpacity",
								"end-value": "0",
								"time": "ZOOM_TIME",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-value",
							"objectClass": "VisualizationController",
							"sid": 354413213336297,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"background\"",
								"start-value": "VisualizationController.backgroundOpacity",
								"end-value": "100",
								"time": "ZOOM_TIME",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-value",
							"objectClass": "VisualizationController",
							"sid": 115299935435103,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"exploration\"",
								"start-value": "VisualizationController.explorationOpacity",
								"end-value": "0",
								"time": "ZOOM_TIME",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 198857503677512
				}
			],
			"sid": 543982209890823
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Camera",
			"description": "Camera movement and zoom.",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "MoveCameraTo",
					"functionDescription": "Move the camera to the parameter X/Y location.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "x location to which the camera should move.",
							"sid": 382759682275374
						},
						{
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "Y location to which the camera should move.",
							"sid": 122873940754597
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "tween-two-properties",
							"objectClass": "Camera",
							"sid": 663582839002286,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"\"",
								"property": "position",
								"end-x": "x",
								"end-y": "y",
								"time": "ZOOM_TIME",
								"ease": "easeoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 698214500569606
				},
				{
					"functionName": "ZoomToDefault",
					"functionDescription": "Set default zoom level for sector view.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "tween-value",
							"objectClass": "Camera",
							"sid": 805334143180735,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\"",
								"start-value": "Camera.zoomLevel",
								"end-value": "ZOOM_LEVEL_DEFAULT",
								"time": "ZOOM_TIME",
								"ease": "easeoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 400780952394963
				},
				{
					"functionName": "ZoomToOverview",
					"functionDescription": "Zoom camera out to show entire sector.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "tween-value",
							"objectClass": "Camera",
							"sid": 968357206011969,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\"",
								"start-value": "Camera.zoomLevel",
								"end-value": "ZOOM_LEVEL_OVERVIEW",
								"time": "ZOOM_TIME",
								"ease": "easeoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 154235620584501
				},
				{
					"functionName": "ZoomToPlanet",
					"functionDescription": "Zoom camera to picked planet.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "MoveCameraTo",
							"sid": 502695020790804,
							"parameters": [
								"Planet.X",
								"Planet.Y"
							]
						},
						{
							"id": "tween-value",
							"objectClass": "Camera",
							"sid": 425353729284107,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\"",
								"start-value": "Camera.zoomLevel",
								"end-value": "ZOOM_LEVEL_PLANET",
								"time": "ZOOM_TIME",
								"ease": "easeoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 856089588785346
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 541847651363239
						}
					],
					"actions": [
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 252054657630680,
							"parameters": {
								"scale": "Camera.zoomLevel"
							}
						}
					],
					"sid": 301519640374316
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "Camera",
							"sid": 642202338364842,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"zoom\""
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Camera",
							"sid": 272695869586273,
							"parameters": {
								"instance-variable": "zoomLevel",
								"value": "Camera.Tween.Value(\"zoom\")"
							}
						}
					],
					"sid": 738815488945617
				}
			],
			"sid": 264496831334389
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "UI",
			"description": "Updates for UI display objects.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Update overview/sector displays."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 471066900308712
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "GameUtils.updateUiText(runtime);"
						},
						{
							"id": "set-text",
							"objectClass": "OverviewTextDisplay",
							"sid": 981059117552307,
							"parameters": {
								"text": "\"\""
							}
						}
					],
					"sid": 201205195501745,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GameController",
									"sid": 760941610651802,
									"parameters": {
										"instance-variable": "overviewMode",
										"comparison": 0,
										"value": "OVERVIEW_SECTOR"
									}
								}
							],
							"actions": [
								{
									"id": "append-text",
									"objectClass": "OverviewTextDisplay",
									"sid": 123697812542476,
									"parameters": {
										"text": "\"[b]SECTOR OVERVIEW[/b]\" & newline"
									}
								},
								{
									"id": "append-text",
									"objectClass": "OverviewTextDisplay",
									"sid": 740657972415337,
									"parameters": {
										"text": "\"Crysether Available: \" & GameController.crysetherStockpile & newline & \"Total Sector Improvement Level: \" & Functions.GetTotalImprovement"
									}
								}
							],
							"sid": 459012284001873
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GameController",
									"sid": 939654011714389,
									"parameters": {
										"instance-variable": "overviewMode",
										"comparison": 0,
										"value": "OVERVIEW_EXPLORATION"
									}
								}
							],
							"actions": [
								{
									"id": "append-text",
									"objectClass": "OverviewTextDisplay",
									"sid": 835897045729548,
									"parameters": {
										"text": "\"[b]EXPLORATION OVERVIEW[/b]\" & newline"
									}
								},
								{
									"id": "append-text",
									"objectClass": "OverviewTextDisplay",
									"sid": 802024318282529,
									"parameters": {
										"text": "\"[i](control Research Station by tapping target location)[/i]\" & newline &\n\"Percentage of sector charted: \" & \"UNKNOWN\""
									}
								}
							],
							"sid": 176563109742235
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GameController",
									"sid": 134375901709980,
									"parameters": {
										"instance-variable": "overviewMode",
										"comparison": 0,
										"value": "OVERVIEW_SUPPLY"
									}
								}
							],
							"actions": [
								{
									"id": "append-text",
									"objectClass": "OverviewTextDisplay",
									"sid": 106520322772746,
									"parameters": {
										"text": "\"[b]SUPPLY OVERVIEW[/b]\" & newline"
									}
								},
								{
									"id": "append-text",
									"objectClass": "OverviewTextDisplay",
									"sid": 687773333256838,
									"parameters": {
										"text": "\"Stats on supply...\""
									}
								}
							],
							"sid": 310054155808573
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Update planet information displays."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "GameController",
							"sid": 728232509854170,
							"parameters": {
								"instance-variable": "selectedPlanetUid",
								"comparison": 4,
								"value": "0"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "Planet",
							"sid": 110556264015963,
							"parameters": {
								"unique-id": "GameController.selectedPlanetUid"
							}
						}
					],
					"actions": [],
					"sid": 940257874056155,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GenericLabel",
									"sid": 947094087621590,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Planet Name\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "GenericLabel",
									"sid": 312241828152022,
									"parameters": {
										"text": "\"Planet Name: \" & Planet.name"
									}
								}
							],
							"sid": 635542973051341
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GenericLabel",
									"sid": 642489719367107,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Improvement Level\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "GenericLabel",
									"sid": 251735783089270,
									"parameters": {
										"text": "\"Improvement Level: \" & Planet.improvementLevel"
									}
								}
							],
							"sid": 826926408751804
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GenericLabel",
									"sid": 383883539103902,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Stellium\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "GenericLabel",
									"sid": 435470082563493,
									"parameters": {
										"text": "\"Stellium Extraction Rate: \" & Planet.stelliumRate - Planet.stelliumDrain"
									}
								}
							],
							"sid": 867161572571403
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GenericLabel",
									"sid": 549989403012881,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Quantia\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "GenericLabel",
									"sid": 500051528316355,
									"parameters": {
										"text": "\"Quantia Harvest Rate: \" & Planet.quantiaRate - Planet.quantiaDrain"
									}
								}
							],
							"sid": 346936358016595
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GenericLabel",
									"sid": 372760780509968,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Exploration\""
									}
								}
							],
							"actions": [],
							"sid": 780148464265243,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Planet",
											"sid": 619788203982004,
											"parameters": {
												"instance-variable": "explorationLevel",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "GenericLabel",
											"sid": 580843522455674,
											"parameters": {
												"text": "\"Exploration Level: Scanned\""
											}
										}
									],
									"sid": 642516988919372
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 713115020338882
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "GenericLabel",
											"sid": 555994358914908,
											"parameters": {
												"text": "\"Exploration Level: Fully Explored\""
											}
										}
									],
									"sid": 938246536931995
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GenericLabel",
									"sid": 975375381851519,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Trait\""
									}
								}
							],
							"actions": [],
							"sid": 261824671977339,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Planet",
											"sid": 426508625059117,
											"parameters": {
												"instance-variable": "explorationLevel",
												"comparison": 2,
												"value": "2"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "GenericLabel",
											"sid": 485371730123089,
											"parameters": {
												"text": "\"(explore planet to discover potential trait)\""
											}
										}
									],
									"sid": 357325264568826
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 426725590508749
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Planet",
											"sid": 276360787893566,
											"parameters": {
												"instance-variable": "explorationLevel",
												"comparison": 0,
												"value": "2"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Planet",
											"sid": 601066102667387,
											"parameters": {
												"instance-variable": "trait",
												"comparison": 4,
												"value": "\"\""
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "GenericLabel",
											"sid": 721821218344006,
											"parameters": {
												"text": "\"(Planet trait: \" & Planet.trait & \")\""
											}
										}
									],
									"sid": 994556720593661
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 257593439024752
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "GenericLabel",
											"sid": 216214108734453,
											"parameters": {
												"text": "\"(No special planet trait)\""
											}
										}
									],
									"sid": 594746230455666
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "GenericLabel",
									"sid": 399460820188269,
									"parameters": {
										"instance-variable": "handle",
										"comparison": 0,
										"value": "\"Supply\""
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "const planet = runtime.objects.Planet.getFirstPickedInstance();\nconst label = runtime.objects.GenericLabel.getFirstPickedInstance();\nconst message = GameUtils.isPlanetSupplied(runtime, planet.uid) ? \"Planet in supply network\" : \"Planet NOT in supply network\";\nlabel.text = message;"
								}
							],
							"sid": 467503219745892
						}
					]
				}
			],
			"sid": 474990103053014
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Exploration",
			"description": "Events for moving exploration ships and updating the exploration layer.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Send a Research Station to a new location by setting movement coordinates, cleaning up anything at the former location, and adjusting instance variables."
				},
				{
					"functionName": "SendResearchStation",
					"functionDescription": "Send a research station to the location specified.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 693493420665511
						},
						{
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 193140090512972
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "EndExploringPlanet",
							"sid": 691277204931657
						},
						{
							"id": "move-to-position",
							"objectClass": "ResearchStation",
							"sid": 878210518985851,
							"behaviorType": "MoveTo",
							"parameters": {
								"x": "x",
								"y": "y",
								"mode": "direct"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "ResearchStation",
							"sid": 641845494713102,
							"parameters": {
								"instance-variable": "activeScanUid",
								"value": "0"
							}
						}
					],
					"sid": 467513985603009
				},
				{
					"eventType": "comment",
					"text": "Place a scan area object upon arrival, and update ship's scan UID."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-arrived",
							"objectClass": "ResearchStation",
							"sid": 456645832489353,
							"behaviorType": "MoveTo"
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 507107691744655,
							"parameters": {
								"object-to-create": "ScanArea",
								"layer": "\"Exploration\"",
								"x": "ResearchStation.X",
								"y": "ResearchStation.Y",
								"create-hierarchy": false,
								"template-name": "\"Scan Area Template\""
							}
						}
					],
					"sid": 672929243750408,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 390103387744442,
									"parameters": {
										"object": "ScanArea"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "ResearchStation",
									"sid": 102633235100639,
									"parameters": {
										"instance-variable": "activeScanUid",
										"value": "ScanArea.UID"
									}
								},
								{
									"id": "set-size",
									"objectClass": "ScanArea",
									"sid": 815161916749835,
									"parameters": {
										"width": "SCAN_AREA_DEFAULT_SIZE",
										"height": "SCAN_AREA_DEFAULT_SIZE"
									}
								},
								{
									"id": "fill-ellipse",
									"objectClass": "ScanArea",
									"sid": 147097788300065,
									"parameters": {
										"x": "ScanArea.Width / 2",
										"y": "ScanArea.Height / 2",
										"radius-x": "ScanArea.Width / 2",
										"radius-y": "ScanArea.Height / 2",
										"color": "rgba(100, 100, 100, 100)",
										"edge": "smooth"
									}
								},
								{
									"id": "wait-for-signal",
									"objectClass": "System",
									"sid": 758011105781361,
									"parameters": {
										"tag": "\"scan_area_complete\" & ScanArea.UID"
									}
								},
								{
									"callFunction": "LogDebugMessage",
									"sid": 941390801022562,
									"parameters": [
										"\"Scan complete; beginning planetary exploration\""
									]
								},
								{
									"id": "set-instvar-value",
									"objectClass": "ResearchStation",
									"sid": 118371402746946,
									"parameters": {
										"instance-variable": "activeScanUid",
										"value": "0"
									}
								},
								{
									"callFunction": "BeginExploringPlanet",
									"sid": 378503538978738,
									"parameters": [
										"Functions.PickPlanetUidToExplore(ResearchStation.UID)",
										"ResearchStation.UID"
									]
								}
							],
							"sid": 549678142254958
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Progressively expand scan area when a research station is actively scanning."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 521864977169507,
							"parameters": {
								"object": "ResearchStation"
							}
						}
					],
					"actions": [],
					"sid": 183515546300618,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "object-uid-exists",
									"objectClass": "System",
									"sid": 825656097737955,
									"parameters": {
										"uid": "ResearchStation.activeScanUid"
									}
								}
							],
							"actions": [],
							"sid": 468293551002665,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "ScanArea",
											"sid": 176990195117674,
											"parameters": {
												"unique-id": "ResearchStation.activeScanUid"
											}
										}
									],
									"actions": [],
									"sid": 188147370552269,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 542069561147068,
													"parameters": {
														"value": "ScanArea.Width < SCAN_MAX_SIZE"
													}
												}
											],
											"actions": [
												{
													"id": "set-size",
													"objectClass": "ScanArea",
													"sid": 483887736477941,
													"parameters": {
														"width": "ScanArea.Width + SCAN_SPEED * dt",
														"height": "ScanArea.Height + SCAN_SPEED * dt"
													}
												},
												{
													"id": "fill-ellipse",
													"objectClass": "ScanArea",
													"sid": 431348716943543,
													"parameters": {
														"x": "ScanArea.Width / 2",
														"y": "ScanArea.Height / 2",
														"radius-x": "ScanArea.Width / 2",
														"radius-y": "ScanArea.Height / 2",
														"color": "rgba(100, 100, 100, 100)",
														"edge": "smooth"
													}
												}
											],
											"sid": 297129771850152
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 942882285163511
												}
											],
											"actions": [
												{
													"id": "signal",
													"objectClass": "System",
													"sid": 955742288054706,
													"parameters": {
														"tag": "\"scan_area_complete\" & ScanArea.UID"
													}
												}
											],
											"sid": 569822921487146
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Scan planet (set exploration level to 1) if a scan radius includes an uncharted (exploration level 0) planet."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 741576654585790,
							"parameters": {
								"object": "ScanArea"
							}
						}
					],
					"actions": [],
					"sid": 150457829494978,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 221390890769714,
									"parameters": {
										"object": "Planet"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Planet",
									"sid": 825685738459921,
									"parameters": {
										"instance-variable": "explorationLevel",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 736210361653467,
									"parameters": {
										"value": "distance(Planet.X, Planet.Y, ScanArea.X, ScanArea.Y) < ScanArea.Width / 2"
									}
								}
							],
							"actions": [
								{
									"id": "signal",
									"objectClass": "System",
									"sid": 289519068185058,
									"parameters": {
										"tag": "\"scan\" & Planet.UID"
									}
								}
							],
							"sid": 527030546940020
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Make uncharted planets appear faded out."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 186907236446791,
							"parameters": {
								"object": "Planet"
							}
						}
					],
					"actions": [],
					"sid": 944926497218672,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Planet",
									"sid": 151069795960574,
									"parameters": {
										"instance-variable": "explorationLevel",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "Planet",
									"sid": 830927628936288,
									"parameters": {
										"opacity": "10"
									}
								}
							],
							"sid": 380115782463029
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 793211601404591
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "Planet",
									"sid": 195481317084989,
									"parameters": {
										"opacity": "100"
									}
								}
							],
							"sid": 968607777069272
						}
					]
				},
				{
					"functionName": "ScanPlanet",
					"functionDescription": "Set planet to scanned (set to exploration level 1).",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Planet",
							"sid": 323858254718874,
							"parameters": {
								"instance-variable": "explorationLevel",
								"value": "1"
							}
						},
						{
							"type": "script",
							"script": "GameUtils.updatePlanetConnections(runtime);"
						},
						{
							"callFunction": "LogDebugMessage",
							"sid": 197955882600389,
							"parameters": [
								"\"Scanned planet \" & Planet.name"
							]
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 302824196026273,
							"parameters": {
								"object-to-create": "PlanetHighlight",
								"layer": "\"Planet Highlights\"",
								"x": "Planet.X",
								"y": "Planet.Y",
								"create-hierarchy": false,
								"template-name": "\"Standard Template\""
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 751085226614196,
							"parameters": {
								"object-to-create": "InfoSprite",
								"layer": "\"Exploration Highlights\"",
								"x": "Planet.X + 75",
								"y": "Planet.Y - 75",
								"create-hierarchy": false,
								"template-name": "\"Standard Template\""
							}
						}
					],
					"sid": 113638445789323,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 701714939522741,
									"parameters": {
										"object": "PlanetHighlight"
									}
								}
							],
							"actions": [
								{
									"id": "fill-ellipse",
									"objectClass": "PlanetHighlight",
									"sid": 559313345252524,
									"parameters": {
										"x": "PlanetHighlight.Width / 2",
										"y": "PlanetHighlight.Height / 2",
										"radius-x": "PlanetHighlight.Width / 2",
										"radius-y": "PlanetHighlight.Height / 2",
										"color": "rgba(100, 100, 100, 100)",
										"edge": "smooth"
									}
								}
							],
							"sid": 533045820112566
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 731985071514180,
									"parameters": {
										"object": "InfoSprite"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "InfoSprite",
									"sid": 669914954904464,
									"parameters": {
										"animation": "\"Question\"",
										"from": "beginning"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Planet",
									"sid": 357743493386667,
									"parameters": {
										"instance-variable": "infoSpriteUid",
										"value": "InfoSprite.UID"
									}
								}
							],
							"sid": 216672511310389
						}
					]
				},
				{
					"functionName": "ExplorePlanet",
					"functionDescription": "Set a planet to fully-explored (exploration level 2).",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Planet",
							"sid": 254013383545556,
							"parameters": {
								"instance-variable": "explorationLevel",
								"value": "2"
							}
						},
						{
							"type": "script",
							"script": "const planet = runtime.objects.Planet.getFirstPickedInstance();\nGameUtils.applyPlanetTraitRetroactively(runtime, planet.uid);"
						},
						{
							"callFunction": "LogDebugMessage",
							"sid": 306082888286053,
							"parameters": [
								"\"Explored planet \" & Planet.name"
							]
						}
					],
					"sid": 427903072584693,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "InfoSprite",
									"sid": 404036595465599,
									"parameters": {
										"unique-id": "Planet.infoSpriteUid"
									}
								}
							],
							"actions": [],
							"sid": 508516140634154,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Planet",
											"sid": 590946741423611,
											"parameters": {
												"instance-variable": "trait",
												"comparison": 4,
												"value": "\"\""
											}
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "InfoSprite",
											"sid": 714896315822162,
											"parameters": {
												"animation": "\"Exclamation\"",
												"from": "beginning"
											}
										}
									],
									"sid": 388212172643113
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 829018959671577
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "InfoSprite",
											"sid": 998898117806754
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Planet",
											"sid": 649762561588665,
											"parameters": {
												"instance-variable": "infoSpriteUid",
												"value": "0"
											}
										}
									],
									"sid": 174457215601442
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Stage planet signals to be scanned/explored."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 300640059688809
						}
					],
					"actions": [
						{
							"id": "wait-for-signal",
							"objectClass": "System",
							"sid": 633282502256888,
							"parameters": {
								"tag": "\"sector_generation_complete\""
							}
						}
					],
					"sid": 953282995217412,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 298823393167436,
									"parameters": {
										"object": "Planet"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Planet",
									"sid": 467523928469364,
									"parameters": {
										"instance-variable": "explorationLevel",
										"comparison": 2,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "wait-for-signal",
									"objectClass": "System",
									"sid": 175061168848814,
									"parameters": {
										"tag": "\"scan\" & Planet.UID"
									}
								},
								{
									"callFunction": "ScanPlanet",
									"sid": 852742338960446
								}
							],
							"sid": 853923949673970
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 132053906891704,
									"parameters": {
										"object": "Planet"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Planet",
									"sid": 256906614113644,
									"parameters": {
										"instance-variable": "explorationLevel",
										"comparison": 2,
										"value": "2"
									}
								}
							],
							"actions": [
								{
									"id": "wait-for-signal",
									"objectClass": "System",
									"sid": 820333741188947,
									"parameters": {
										"tag": "\"explore\" & Planet.UID"
									}
								},
								{
									"callFunction": "ExplorePlanet",
									"sid": 840632538165551
								}
							],
							"sid": 238482599458076
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 210979547494352
						}
					],
					"actions": [],
					"sid": 848936461572186
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 871672280047215
						}
					],
					"actions": [],
					"sid": 401435332479615
				},
				{
					"functionName": "PickPlanetUidToExplore",
					"functionDescription": "Pick the suitable planet to explore and return UID.",
					"functionCategory": "",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "researchStationUid",
							"type": "number",
							"initialValue": "0",
							"comment": "UID of the research station to use for \"nearest\" calculation.",
							"sid": 666628595224071
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "ResearchStation",
							"sid": 545651609089079,
							"parameters": {
								"unique-id": "researchStationUid"
							}
						},
						{
							"id": "pick-by-evaluate",
							"objectClass": "System",
							"sid": 662943221111211,
							"parameters": {
								"object": "Planet",
								"expression": "Planet.explorationLevel = 1"
							}
						},
						{
							"id": "pick-nearestfurthest",
							"objectClass": "Planet",
							"sid": 802794099077149,
							"parameters": {
								"which": "nearest",
								"x": "ResearchStation.X",
								"y": "ResearchStation.Y"
							}
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 299127464573123,
							"parameters": {
								"value": "Planet.UID"
							}
						}
					],
					"sid": 790294211319620
				},
				{
					"functionName": "BeginExploringPlanet",
					"functionDescription": "Set up variables to begin exploring a planet.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "planetUid",
							"type": "number",
							"initialValue": "0",
							"comment": "UID of the planet to begin exploring.",
							"sid": 219267633215971
						},
						{
							"name": "researchStationUid",
							"type": "number",
							"initialValue": "0",
							"comment": "UID of the research station that will be exploring.",
							"sid": 288168253388939
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Planet",
							"sid": 564179895794986,
							"parameters": {
								"unique-id": "planetUid"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "ResearchStation",
							"sid": 955059348945623,
							"parameters": {
								"unique-id": "researchStationUid"
							}
						}
					],
					"actions": [
						{
							"callFunction": "LogDebugMessage",
							"sid": 257068897336926,
							"parameters": [
								"\"Now exploring planet \" & Planet.name"
							]
						},
						{
							"id": "set-instvar-value",
							"objectClass": "ResearchStation",
							"sid": 875014738868010,
							"parameters": {
								"instance-variable": "exploringPlanetUid",
								"value": "planetUid"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "ResearchStation",
							"sid": 875217504660367,
							"parameters": {
								"instance-variable": "explorationYearsRemaining",
								"value": "EXPLORE_TIME_YEARS"
							}
						}
					],
					"sid": 280218353422598
				},
				{
					"functionName": "EndExploringPlanet",
					"functionDescription": "Research station stops exploring a planet (either because it completed, or moved away).",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "LogDebugMessage",
							"sid": 323494771957886,
							"parameters": [
								"\"Ending planetary exploration\""
							]
						},
						{
							"id": "set-instvar-value",
							"objectClass": "ResearchStation",
							"sid": 270871447879871,
							"parameters": {
								"instance-variable": "exploringPlanetUid",
								"value": "0"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "ResearchStation",
							"sid": 410999512429566,
							"parameters": {
								"instance-variable": "explorationYearsRemaining",
								"value": "0"
							}
						}
					],
					"sid": 469535009678474
				},
				{
					"eventType": "comment",
					"text": "Continue exploring target planet, or select new planet to explore if complete."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 803960448490704,
							"parameters": {
								"object": "ResearchStation"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "ResearchStation",
							"sid": 758973986262195,
							"parameters": {
								"instance-variable": "exploringPlanetUid",
								"comparison": 4,
								"value": "0"
							}
						}
					],
					"actions": [],
					"sid": 222191903702820,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "ResearchStation",
									"sid": 781359862102684,
									"parameters": {
										"instance-variable": "explorationYearsRemaining",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "subtract-from-instvar",
									"objectClass": "ResearchStation",
									"sid": 107238873210255,
									"parameters": {
										"instance-variable": "explorationYearsRemaining",
										"value": "dt * YEARS_PER_MINUTE / 60"
									}
								}
							],
							"sid": 649968198345127
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 899352986489401
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "Planet",
									"sid": 873653761418498,
									"parameters": {
										"unique-id": "ResearchStation.exploringPlanetUid"
									}
								}
							],
							"actions": [
								{
									"callFunction": "ExplorePlanet",
									"sid": 653268791739858
								},
								{
									"callFunction": "EndExploringPlanet",
									"sid": 219601070801033
								},
								{
									"callFunction": "BeginExploringPlanet",
									"sid": 765104270134731,
									"parameters": [
										"Functions.PickPlanetUidToExplore(ResearchStation.UID)",
										"ResearchStation.UID"
									]
								}
							],
							"sid": 923282069811781
						}
					]
				}
			],
			"sid": 504751791717747
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Trade Ships",
			"description": "Creation and management of trade ships.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 255561997423125
						}
					],
					"actions": [
						{
							"id": "wait-for-signal",
							"objectClass": "System",
							"sid": 778545364601181,
							"parameters": {
								"tag": "\"sector_generation_complete\""
							}
						},
						{
							"id": "start-timer",
							"objectClass": "Planet",
							"sid": 951157973670152,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "0.5",
								"type": "regular",
								"tag": "\"orbit_ship\""
							}
						},
						{
							"id": "start-timer",
							"objectClass": "Planet",
							"sid": 662077053624610,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "0.2",
								"type": "regular",
								"tag": "\"trade_ship\""
							}
						}
					],
					"sid": 344973388948326
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-arrived",
							"objectClass": "TradeShip",
							"sid": 154470112440478,
							"behaviorType": "MoveTo"
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "TradeShip",
							"sid": 709917845459343
						}
					],
					"sid": 614037299175894
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "TradeShip",
							"sid": 451918182209723,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"lifetime\""
							}
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 420298612869285,
							"parameters": {
								"object": "TradeShip"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "TradeShip",
							"sid": 175379491210350
						}
					],
					"sid": 178761408853884
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "Planet",
							"sid": 416073701887659,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"orbit_ship\""
							}
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 162534522804034,
							"parameters": {
								"object": "Planet"
							}
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "const rnd = ConstructUtils.getRandomNumberInRange;\n\n// Spawn a trade ship to orbit this planet\nconst planet = runtime.objects.Planet.getFirstPickedInstance();\nif (Math.random() > planet.instVars.improvementLevel / 15) return;\n\nconst ship = runtime.objects.TradeShip.createInstance(\n\t\"Ships\",\n\tplanet.x,\n\tplanet.y,\n\tfalse,\n\t\"Standard Trade Ship\"\n);\nship.behaviors.Orbit.isEnabled = true;\nship.behaviors.Orbit.speed = rnd(Math.PI / 4, Math.PI);\nif (Math.random() <= 0.5) ship.behaviors.Orbit.speed *= -1;\nship.behaviors.Orbit.pin(planet);\nship.behaviors.Orbit.primaryRadius = rnd(50, 80);\nship.behaviors.Orbit.secondaryRadius = rnd(50, 80);\nship.behaviors.Orbit.rotation = rnd(0, Math.PI * 2);\nship.behaviors.Orbit.offsetAngle = rnd(0, Math.PI * 2);\nship.behaviors.isMatchRotation = true;\nship.instVars.lifetimeYears = 2;"
						}
					],
					"sid": 819554711623696,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 979645811180774,
									"parameters": {
										"object": "TradeShip"
									}
								}
							],
							"actions": [
								{
									"id": "start-timer",
									"objectClass": "TradeShip",
									"sid": 498786419958398,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "2 * 60 / YEARS_PER_MINUTE",
										"type": "once",
										"tag": "\"lifetime\""
									}
								}
							],
							"sid": 643161580067075,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 268060031754855,
											"parameters": {
												"value": "TradeShip.Orbit.Speed < 0"
											}
										}
									],
									"actions": [
										{
											"id": "set-mirrored",
											"objectClass": "TradeShip",
											"sid": 637054941974804,
											"parameters": {
												"state": "mirrored"
											}
										}
									],
									"sid": 449302853144258
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "Planet",
							"sid": 904245317818262,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"trade_ship\""
							}
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 417821934746854,
							"parameters": {
								"object": "Planet"
							}
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "const rnd = ConstructUtils.getRandomNumberInRange;\n\n// Spawn a trade ship and send to a connected planet.\nconst planet = runtime.objects.Planet.getFirstPickedInstance();\nconst connectedPlanets = GameUtils.getConnectedPlanets(runtime, planet.uid);\nif (connectedPlanets.length === 0) return;\n\nlet tradeLevel = 0;\ntradeLevel += GameUtils.numFacilityOnPlanet(runtime, planet.uid, \"Quantia Harvester\");\ntradeLevel += GameUtils.numFacilityOnPlanet(runtime, planet.uid, \"Stellium Extractor\");\ntradeLevel += GameUtils.numFacilityOnPlanet(runtime, planet.uid, \"Strip Mine\");\ntradeLevel += GameUtils.numFacilityOnPlanet(runtime, planet.uid, \"Warp Depot\") * 4;\ntradeLevel += GameUtils.numFacilityOnPlanet(runtime, planet.uid, \"Colony\") * 3;\n\n// Spawn more ships at higher trade level\nif (Math.random() > (tradeLevel / 6)) return;\n\nconst ship = runtime.objects.TradeShip.createInstance(\n\t\"Ships\",\n\tplanet.x + rnd(-20, 20),\n\tplanet.y + rnd(-20, 20),\n\tfalse,\n\t\"Standard Trade Ship\"\n);\nship.behaviors.MoveTo.isEnabled = true;\nconst destPlanet = connectedPlanets[Math.floor(Math.random() * connectedPlanets.length)];\nship.behaviors.MoveTo.moveToPosition(\n\tdestPlanet.x + rnd(-20, 20),\n\tdestPlanet.y + rnd(-20, 20)\n);"
						}
					],
					"sid": 569130085474613
				}
			],
			"sid": 748338600580016
		}
	],
	"sid": 165260888475578
}